{
	"name": "JexidaMCP Development",
	"image": "mcr.microsoft.com/devcontainers/python:1-3.11-bullseye",
	
	"features": {
		"ghcr.io/devcontainers/features/git:1": {},
		"ghcr.io/devcontainers/features/github-cli:1": {}
	},
	
	// Enable SSH agent forwarding
	// VS Code/Cursor should automatically forward SSH keys via the agent socket
	"remoteEnv": {
		"SSH_AUTH_SOCK": "${localEnv:SSH_AUTH_SOCK}"
	},
	
	// Mount SSH keys from host (alternative if agent forwarding doesn't work)
	"mounts": [
		"source=${localEnv:HOME}${localEnv:USERPROFILE}/.ssh,target=/home/vscode/.ssh,type=bind,consistency=cached"
	],
	
	// Network configuration: Note that --network=host doesn't work on Docker Desktop/Windows
	// For WSL2, containers can't directly access host LAN (192.168.x.x)
	// Workaround: Use WSL2 directly or configure Docker Desktop network settings
	// "runArgs": [
	// 	"--network=host"  // Doesn't work on Windows/WSL2 Docker Desktop
	// ],

	// Set *default* container specific settings.json values on container create.
	"customizations": {
		"vscode": {
			"settings": {
				"python.defaultInterpreterPath": "/usr/local/bin/python",
				"python.linting.enabled": true,
				"python.linting.pylintEnabled": false,
				"python.formatting.provider": "black",
				"editor.formatOnSave": true,
				"files.eol": "\n"
			},
			"extensions": [
				"ms-python.python",
				"ms-python.black-formatter",
				"ms-python.pylint"
			]
		}
	},

	// Use 'forwardPorts' to make a list of ports inside the container available locally.
	// "forwardPorts": [],

	// Use 'postCreateCommand' to run commands after the container is created.
	"postCreateCommand": "bash .devcontainer/post-create.sh",

	// Comment out to connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root.
	"remoteUser": "vscode",
	
	// Mount the workspace
	"workspaceFolder": "/workspace",
	"workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind",
	
}

