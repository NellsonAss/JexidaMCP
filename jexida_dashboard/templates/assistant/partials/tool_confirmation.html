{% comment %}
Tool confirmation partial for HTMX.
This can be used as a standalone partial if using HTMX to load confirmation dialogs.
{% endcomment %}

<div class="tool-confirmation" data-tool-call-id="{{ tool_call.id }}">
    <div class="alert alert-{{ risk_class }} mb-3">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="badge bg-{{ risk_class }} fs-6">{{ tool_call.risk_level|upper }} RISK</span>
        </div>
        <p class="mb-0">
            <i class="bi bi-exclamation-triangle me-2"></i>
            {{ tool_call.reason }}
        </p>
    </div>
    
    <div class="mb-3">
        <h6><i class="bi bi-gear me-2"></i>Tool Details</h6>
        <table class="table table-sm table-borderless">
            <tr>
                <td class="text-muted" style="width: 100px;">Name</td>
                <td><code>{{ tool_call.tool_name }}</code></td>
            </tr>
            <tr>
                <td class="text-muted">Description</td>
                <td>{{ tool_call.tool_description|default:"No description" }}</td>
            </tr>
        </table>
    </div>
    
    <div class="mb-3">
        <h6><i class="bi bi-code-square me-2"></i>Parameters</h6>
        <pre class="bg-dark text-light p-3 rounded" style="max-height: 200px; overflow: auto;">{{ tool_call.parameters|pprint }}</pre>
    </div>
    
    <div class="d-flex gap-2 justify-content-end">
        <button 
            type="button" 
            class="btn btn-secondary"
            hx-post="/api/assistant/confirm-tool/"
            hx-vals='{"tool_call_id": "{{ tool_call.id }}", "confirmed": false}'
            hx-target="#chat-messages"
            hx-swap="beforeend"
        >
            <i class="bi bi-x-circle me-1"></i>Cancel
        </button>
        <button 
            type="button" 
            class="btn btn-primary"
            hx-post="/api/assistant/confirm-tool/"
            hx-vals='{"tool_call_id": "{{ tool_call.id }}", "confirmed": true}'
            hx-target="#chat-messages"
            hx-swap="beforeend"
            hx-indicator="#confirm-spinner"
        >
            <span id="confirm-spinner" class="htmx-indicator spinner-border spinner-border-sm me-1"></span>
            <i class="bi bi-check-circle me-1"></i>Execute Tool
        </button>
    </div>
</div>

